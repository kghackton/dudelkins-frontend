<template>
    <svg width="439" height="335" viewBox="0 0 439 335" fill="none" xmlns="http://www.w3.org/2000/svg">
<!--        <path d="M140.279 101.537H126.391C118.091 101.537 111.297 108.324 111.297 116.622V213.29H65.3791C60.8911 171.517 40.8313 138.14 14.9807 128.691C7.70035 126.032 0 131.509 0 139.256V322.792C0 330.538 7.70035 336.015 14.9807 333.356C39.0345 324.564 58.0676 295.051 64.2162 257.336H141.986C149.348 257.336 155.372 251.315 155.372 243.957V241.734V226.664V116.618C155.372 108.324 148.582 101.537 140.279 101.537Z" fill="#F0F1F1"/>-->
        <path d="M140.279 101.537H126.391C118.091 101.537 111.297 108.324 111.297 116.622V213.29H65.3791C60.8911 171.517 40.8313 138.14 14.9807 128.691C7.70035 126.032 0 131.509 0 139.256V322.792C0 330.538 7.70035 336.015 14.9807 333.356C39.0345 324.564 58.0676 295.051 64.2162 257.336H141.986C149.348 257.336 155.372 251.315 155.372 243.957V241.734V226.664V116.618C155.372 108.324 148.582 101.537 140.279 101.537Z" fill="url(#paint0_linear)"/>
        <g id="camBody" :style="`transform-origin:${anchor.x}px ${anchor.y}px; transform: rotate(${angle}deg)`">
            <path d="M406.75 236.343L375.661 234.742L368.789 107.057C368.789 107.057 415.582 100.982 428.327 135.19C441.071 169.399 419.572 233.063 419.572 233.063L406.75 236.343Z" fill="#282F36"/>
            <path d="M377.399 111.799L210.725 21.296C176.898 2.93037 130.696 22.5942 107.525 65.2219C84.3541 107.846 92.9917 157.291 126.819 175.661C128.316 176.473 129.844 177.184 131.388 177.849L293.613 265.934L377.399 111.799Z" fill="#B2B2B2"/>
            <path d="M392.432 219.924C415.604 177.298 406.966 127.852 373.14 109.484C339.313 91.1165 293.107 110.782 269.935 153.408C246.763 196.034 255.4 245.48 289.227 263.848C323.054 282.216 369.26 262.551 392.432 219.924Z" fill="#727E80"/>
            <path d="M379.194 212.735C397.356 179.323 390.585 140.566 364.07 126.168C337.555 111.771 301.337 127.185 283.174 160.596C265.011 194.008 271.782 232.765 298.297 247.163C324.812 261.561 361.031 246.147 379.194 212.735Z" fill="#B2B2B2"/>
            <path d="M350.031 196.893C357.162 183.773 354.504 168.556 344.094 162.903C333.683 157.25 319.462 163.302 312.331 176.422C305.199 189.541 307.857 204.758 318.268 210.411C328.678 216.064 342.899 210.012 350.031 196.893Z" fill="#0D2834"/>
            <path d="M397.345 109.84L209.348 7.76202C171.196 -12.9552 119.079 9.2274 92.9442 57.3045C66.8097 105.382 80.192 154.454 118.348 175.171C120.035 176.088 121.762 176.889 123.501 177.643L213.287 226.723C213.287 226.723 229.851 233.024 229.625 231.193C206.489 217.791 217.546 169.286 223.061 159.351C229.742 147.306 252.135 171.133 279.106 168.066C297.408 169.368 341.65 96.5157 397.345 109.84Z" fill="#43747C"/>
            <path d="M397.345 109.84L209.348 7.76202C171.196 -12.9552 119.079 9.2274 92.9442 57.3045C66.8097 105.382 80.192 154.454 118.348 175.171C120.035 176.088 121.762 176.889 123.501 177.643L213.287 226.723C213.287 226.723 229.851 233.024 229.625 231.193C206.489 217.791 217.546 169.286 223.061 159.351C229.742 147.306 252.135 171.133 279.106 168.066C297.408 169.368 341.65 96.5157 397.345 109.84Z" fill="url(#paint1_linear)"/>
            <path d="M421.908 230.497C424.02 225.942 468.877 139.388 401.289 105.482C333.697 71.577 283.088 166.9 270.126 167.941C270.126 167.941 290.855 173.511 293.958 172.668C312.832 167.537 341.801 94.7624 394.004 120.812C453.608 150.559 414.445 227.15 413.22 231.675C412.641 233.813 420.069 234.477 421.908 230.497Z" fill="#1C252E"/>
            <path d="M423.713 229.53C425.825 224.975 468.398 137.383 400.81 103.478C333.222 69.5721 283.092 166.9 270.13 167.946C270.13 167.946 289.645 168.362 292.799 167.732C306.92 164.914 342.264 90.1144 394.467 116.164C454.071 145.911 413.963 225.149 412.738 229.67C412.158 231.808 411.307 234.276 406.749 236.348C419.983 237.141 421.87 233.506 423.713 229.53Z" fill="#B2B2B2"/>
        </g>
        <defs>
            <linearGradient id="paint0_linear" x1="134.757" y1="182.662" x2="-15.6232" y2="270.05" gradientUnits="userSpaceOnUse">
                <stop stop-color="#EFF0F0"/>
                <stop offset="1" stop-color="#CACCCC"/>
            </linearGradient>
            <linearGradient id="paint1_linear" x1="178.11" y1="65.8054" x2="111.149" y2="166.006" gradientUnits="userSpaceOnUse">
                <stop stop-color="#C1C3C3"/>
                <stop offset="1" stop-color="#F1F2F2"/>
            </linearGradient>
        </defs>
    </svg>
</template>

<script>
    export default {
        name: "Cam",
        data:()=>({
            angle:0,
            anchor:{
                x: 130,
                y: 135,
            }
        }),
        mounted(){
            document.onmousemove = this.handleMouseMove;

        },
        destroyed() {
            document.removeEventListener('onmousemove', this.handleMouseMove)
        },
        methods:{
            handleMouseMove(e) {
                const rad = Math.atan((e.clientY-this.anchor.y)/(e.clientX-this.anchor.x))
                const deg = rad*57
                let innerangle
                if(e.clientX-this.anchor.x>0 && e.clientY-this.anchor.y>0){ //если мышь в активной области
                    innerangle = deg
                }
                else{
                    if( e.clientX-this.anchor.x<0 && e.clientY-this.anchor.y<0 ){
                        innerangle = -deg +90
                    }
                }
                this.angle = innerangle - 30
            }
        }
    }
</script>

<style scoped>
    svg{
        overflow: visible;
    }
    g{
        transition: transform .3s linear;
        /*transition-delay: 1s;*/
    }
</style>